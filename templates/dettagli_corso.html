{% extends "base_ios.html" %}

{% block title %}Dettagli {{ nome_corso }}{% endblock %}

{% set large_title = nome_corso %}

{% block navbar %}
    {% set title = "Dettagli Corso" %}
    {% set back_url = url_for('corsi.lista_corsi') %}
    {% set back_text = "Corsi" %}
    {% include 'components/ios_navbar.html' %}
{% endblock %}

{% block content %}
<div class="ios-page">

    {% if not ha_lezioni %}
    <div class="ios-empty-state">
        <div class="ios-empty-icon">üìö</div>
        <h3 class="ios-empty-title">Nessuna lezione</h3>
        <p class="ios-empty-message">Non ci sono lezioni associate a questo corso.</p>
        <a href="{{ url_for('lezioni.aggiungi_lezione') }}" class="ios-button ios-button-primary">
            ‚ûï Aggiungi Lezioni
        </a>
    </div>

    {% else %}

    <!-- Header info corso -->
    <div class="corso-header-card">
        <div class="corso-header-id">ID: {{ corso }}</div>
        <div class="corso-header-nome">{{ nome_corso }}</div>
    </div>

    <!-- Sezione: ORE -->
    <div class="ios-section-header">‚è±Ô∏è Ore</div>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üìö</div>
            <div class="stat-label">Totali</div>
            <div class="stat-value">{{ ore_totali | round(1) }}h</div>
        </div>
        <div class="stat-card stat-card-green">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-label">Completate</div>
            <div class="stat-value">{{ ore_completate | round(1) }}h</div>
        </div>
        <div class="stat-card stat-card-blue">
            <div class="stat-icon">üßæ</div>
            <div class="stat-label">Fatturate</div>
            <div class="stat-value">{{ ore_fatturate | round(1) }}h</div>
        </div>
    </div>

    <!-- Sezione: AMMONTARE -->
    <div class="ios-section-header">üí∂ Ammontare</div>
    <div class="stats-grid">
        <div class="stat-card stat-card-purple">
            <div class="stat-icon">üí∂</div>
            <div class="stat-label">Totale corso</div>
            <div class="stat-value stat-value-euro">‚Ç¨{{ ammontare_totale | round(2) }}</div>
        </div>
        <div class="stat-card stat-card-green">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-label">Completato</div>
            <div class="stat-value stat-value-euro">‚Ç¨{{ ammontare_completato | round(2) }}</div>
        </div>
        <div class="stat-card stat-card-blue">
            <div class="stat-icon">üßæ</div>
            <div class="stat-label">Fatturato</div>
            <div class="stat-value stat-value-euro">‚Ç¨{{ totale_fatturato_lordo | round(2) }}</div>
        </div>
    </div>

    <!-- Azioni -->
    <div class="ios-list-group" style="margin-top: 16px;">
        <a href="{{ url_for('lezioni.dashboard') }}?corso={{ corso }}" class="ios-list-item">
            <span class="ios-list-icon">üëÅÔ∏è</span>
            <div class="ios-list-content">
                <span class="ios-list-title">Visualizza Lezioni</span>
            </div>
            <span class="ios-list-chevron"></span>
        </a>
        <a href="{{ url_for('corsi.modifica_corso', id_corso=corso) }}" class="ios-list-item">
            <span class="ios-list-icon">‚úèÔ∏è</span>
            <div class="ios-list-content">
                <span class="ios-list-title">Modifica Corso</span>
            </div>
            <span class="ios-list-chevron"></span>
        </a>
    </div>

    {% endif %}
</div>

<style>
.corso-header-card {
    margin: 12px 16px 4px;
    padding: 16px;
    background: var(--ios-card-background);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow-sm);
}

.corso-header-id {
    font-size: 12px;
    color: var(--ios-secondary-label);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.corso-header-nome {
    font-size: 20px;
    font-weight: 700;
    color: var(--ios-label);
}

.ios-section-header {
    padding: 16px 16px 6px;
    font-size: 13px;
    font-weight: 600;
    color: var(--ios-secondary-label);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin: 0 16px 8px;
}

.stat-card {
    background: var(--ios-card-background);
    border-radius: 12px;
    padding: 14px 10px;
    text-align: center;
    box-shadow: var(--shadow-sm);
}

.stat-card-green { background: rgba(52, 199, 89, 0.10); }
.stat-card-blue  { background: rgba(0, 122, 255, 0.10); }
.stat-card-purple { background: rgba(175, 82, 222, 0.10); }

.stat-icon {
    font-size: 22px;
    margin-bottom: 4px;
}

.stat-label {
    font-size: 11px;
    color: var(--ios-secondary-label);
    font-weight: 500;
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.stat-value {
    font-size: 18px;
    font-weight: 700;
    color: var(--ios-label);
}

.stat-value-euro {
    font-size: 15px;
    color: var(--ios-label);
}
</style>
{% endblock %}
